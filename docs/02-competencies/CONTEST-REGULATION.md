# Конкурсное задание: суть и регламент (без воды)

Ниже — короткая, но полная выжимка по регламенту и требованиям из вашего текста. Всё, что нужно для разработки.

## 1) Общие требования и формат
- **Длительность:** 18 часов, 3 дня.
- **Минимальные ОС:** Android 13.0, iOS 17.0.
- **Бэкенд:** Supabase, **только REST API**.
- **Формат:** практическое выполнение задания.
- **Задачи:** выдаются в таск‑трекере, **по спринтам**.
- **Канбан‑стадии:** Новая → В процессе → Можно проверять → Завершена.
- **Ограничение WIP:** **не более 2 задач одновременно**.
- **Дизайн:** строго по макету, **адаптивная верстка**.

## 2) Оценка и критерии
Оценка по блокам:
- **Архитектура**
- **Верстка**
- **Клиент‑сервер**
- **Хранение**
- **Аппаратные функции**
- **Тестирование (вариатив)**
- **Подготовка продукта (вариатив)**

## 3) Архитектура (модуль А)
**Требование:** разделить слои бизнес‑логики, UI и домена.
- UI не должен ломать другие экраны.
- Проект разложить по папкам архитектуры.
- **Обязательные комментарии в каждом классе:**
  - назначение класса
  - дата
  - автор
  - назначение вложенных элементов

**Связка слоёв:**
UI → ViewModel → Repository → Data (API/DB)

**Важно:** для WebSocket на экране **«Игра»** использовать **Event Bus**.

## 4) Верстка (модуль Б)
**Общее:** адаптивная верстка, без пустых зон, без искажений, соблюдение отступов и шрифтов.

### Обязательные экраны
- SplashScreen
- Onboarding
- Language select
- Sign Up (2 шага)
- Log In
- Main screen
- Profile
- Profile resize photo
- Exercise: Guess animal
- Exercise: Choose correct
- Game
- Exercise: Listening

### Важные детали UI‑логики
**Onboarding**
- Последний экран / пропуск → **Language select**.

**Language select**
- Доступен **только системный** и **английский** язык.
- Если смена не реализована → использовать английский.

**Sign Up**
- 2 последовательных страницы.
- Назад: со 2‑й → на 1‑ю (данные сохраняются).
- Назад на 1‑й → Log In.
- Email: только **строчные буквы/цифры**, формат `name@domenname.ru`.
- Пароль: **>= 8**, заглавные, строчные, цифры, пробелы, спецсимволы.
- Показ/скрытие пароля.
- Переход на Log In только при согласии с политикой.

Мини‑пример проверки email:
```kotlin
val ok = email.matches("^[a-z0-9]+@[a-z0-9]+\\.[a-z]{2,3}$".toRegex())
```

**Log In**
- Показ/скрытие пароля.
- Назад → Language select.

**Main screen**
- В шапке: аватар и имя.
- Лидерборд: **топ‑3 по баллам**.
- Плитки упражнений → открывают пустые экраны.

**Profile**
- Смена темы + меняется текст кнопки.
- Переход к выбору языка.
- Выбор фото → экран Resize photo.

## 5) Клиент‑сервер (модуль В)
**Требование:** все данные через API, корректная обработка ошибок.
- Нет интернета → экран ошибки по макету.
- Ошибка сервера → диалог, закрывается вручную.
- Индикация загрузки обязательна.

**Где сервер обязателен:**
- Sign Up / Log In
- Main (профиль, лидерборд, упражнения)
- Profile (данные и фото)
- Все упражнения + отправка результата
- Game (WebSocket)

## 6) Хранение (модуль Г)
- Язык сохраняется между перезапусками.
- Локализация по переводам.
- Sign Up: **состояние формы сохраняется**.
- Log In: **сессия сохраняется**.
- Упражнения: хранить **серию успешных ответов**.
- Политика/условия: открыть PDF.
- Медиа кэшируются.

Мини‑пример хранения:
```kotlin
prefs.edit().putString("lang", "en").apply()
```

## 7) Аппаратные функции (модуль Д)
- Камера/галерея для аватара.
- Обрезка фото в квадрате + круглая область без заливки.
- Смена темы: системная и вручную.
- Локальное уведомление: если не заходил **> 1 минуты**, 1 раз до следующего входа.
- TensorFlow Lite (распознавание животных).
- AR‑режим для 3D (если есть модель).
- Виджет: позиция в рейтинге + ближайшие соседи.
- Микрофон + распознавание речи (аудирование).

**Виджет — логика:**
- Нет авторизации → призыв к действию.
- Показ позиции и **1 выше + 2 ниже** в рейтинге.

## 8) Упражнения: логика и баллы
**Guess animal**
- Показать картинку с сервера.
- Пользователь вводит слово.
- Результат = распознавание TensorFlow Lite.

Баллы:
- За этап: **1**.
- Серия ≥ 2: **+0.2 * серия**.
- Ошибка → серия сбрасывается.

**Choose correct**
- Слово с сервера.
- Чередование: англ слово + рус варианты / рус слово + англ варианты.
- 4 кнопки вариантов, правильный зелёный, неверный оранжевый.

Баллы:
- За этап: **1**.
- Серия ≥ 2: **+0.2 * серия**.
- Ошибка → серия сбрасывается.

**Listening**
- Слово + транскрипция.
- Запись голоса → распознавание → сравнение.

Баллы:
- За этап: **1**.
- Серия ≥ 2: **+2 * серия**.
- Ошибка → серия сбрасывается.

## 9) Игра (Game)
- При входе создаётся комната.
- 10 секунд ожидания второго игрока.
- Нет игрока → бот.
- Бот побеждает **с вероятностью 20% на каждом этапе**.
- Игрокам показываются **одинаковые слова и варианты**.

## 10) Тестирование (модуль Е, вариатив)
TDD для Onboarding:
- Очередь картинок/текстов.
- Очередь создаётся **один раз**.
- Прогресс сохраняется между перезапусками.
- В компоненте хранится **только текущий элемент**.
- Последний элемент → кнопка меняется.
- 3 коммита: **RED → GREEN → REFACTOR**.

## 11) Подготовка продукта (модуль Ж, вариатив)
- Работа в ветке `Path-X`.
- Merge в `main`, **ветка не удаляется**.
- Презентация для разработчиков: архитектура, классы, производительность, библиотеки.
- Подготовка публикации: иконка, описание, скриншоты, категория, возраст.

## 12) Специальные правила
- **Если приложение не компилируется — работа не оценивается.**
- Интернет ограничен: **10 минут за сессию**.
- Запрещены: носители, телефоны, часы, планшеты.
- Разрешены: личные клавиатуры/мыши (проверка техкоманды).

---

Это опорный документ. Полный путь «как сделать» — в `END-TO-END.md`.
